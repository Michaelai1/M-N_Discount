<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M&N - Claim Your Exclusive Offer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Sign-up Form -->
    <div class="container" id="form-container">
        <!-- M&N Logo -->
        <div class="logo-container">
            <div class="logo">
                <div class="logo-main">
                    <span class="logo-m">M</span>
                    <span class="logo-amp">&</span>
                    <span class="logo-n">N</span>
                </div>
                <div class="logo-bar">
                    <span class="logo-text">MACROS & NUTRITION</span>
                </div>
                <div class="logo-location">BLOOMINGTON</div>
            </div>
        </div>

        <!-- Headline -->
        <h1 class="headline">Claim Your Exclusive Offer!</h1>

        <!-- Form -->
        <form id="offer-form">
            <!-- Input Fields -->
            <div class="input-container">
                <select id="offer" name="offer" class="input-field" required>
                    <option value="">Choose an offer...</option>
                    <option value="50-off-shake-smoothie">50% Off Shake or Smoothie</option>
                    <option value="25-off-order">25% Off Order (Maybe Pre-Workout Creatine)</option>
                    <option value="bogo-energy-drink">Buy 1 Energy Drink Get One 50% Off</option>
                </select>
                
                <input type="text" id="fullName" name="fullName" class="input-field" placeholder="Enter your full name" required>
                
                <input type="email" id="email" name="email" class="input-field" placeholder="Enter your email address" required>
                
                <!-- Marketing Agreement Checkbox -->
                <div style="display: flex; align-items: center; gap: 15px; color: white; font-size: 1.2rem;">
                    <input type="checkbox" id="marketing" name="marketing" required style="width: 20px; height: 20px; accent-color: #e74c3c;">
                    <label for="marketing" style="color: white; cursor: pointer;">
                        I agree to receive marketing emails and offers from M&N.
                    </label>
                </div>
            </div>

            <!-- CTA Button -->
            <button type="submit" id="submit-btn" class="cta-button" disabled>
                GET MY OFFER
            </button>
            
            <!-- Instagram Link -->
            <p class="instagram-link">
                P.S. Follow <a href="https://www.instagram.com/btowndeals" target="_blank" rel="noopener noreferrer">@btowndeals</a> on Instagram for more Bloomington deals on food, beauty, clothes, and more!
            </p>
        </form>
    </div>

    <!-- Success Message (Hidden by default) -->
    <div class="container thank-you-container" id="success-message" style="display: none;">
        <!-- M&N Logo -->
        <div class="logo-container">
            <div class="logo">
                <div class="logo-main">
                    <span class="logo-m">M</span>
                    <span class="logo-amp">&</span>
                    <span class="logo-n">N</span>
                </div>
                <div class="logo-bar">
                    <span class="logo-text">MACROS & NUTRITION</span>
                </div>
                <div class="logo-location">BLOOMINGTON</div>
            </div>
        </div>

        <!-- Success Content -->
        <div class="thank-you-content">
            <div class="success-icon">âœ“</div>
            <h1 class="thank-you-headline">Success!</h1>
            <p class="thank-you-message">Your code has been sent to your email.</p>
            <p class="next-steps">Check your inbox for your exclusive offer code. If you don't see it, please check your spam folder.</p>
            
            <!-- Instagram CTA -->
            <div class="instagram-cta">
                <h2 class="instagram-headline">While you wait, don't miss the next deal!</h2>
                <a href="https://www.instagram.com/btowndeals" target="_blank" rel="noopener noreferrer" class="instagram-button">Follow @btowndeals on Instagram</a>
                <p class="instagram-description">Get exclusive discounts at businesses all over Bloomington.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const offerSelect = document.getElementById('offer');
            const submitBtn = document.getElementById('submit-btn');
            const form = document.getElementById('offer-form');
            const formContainer = document.getElementById('form-container');
            const successMessage = document.getElementById('success-message');
            
            // Handle offer selection change
            offerSelect.addEventListener('change', function() {
                if (this.value) {
                    // Enable button and add animations
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Get My Code!';
                    submitBtn.className = 'cta-button';
                } else {
                    // Disable button and remove animations
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'GET MY OFFER';
                    submitBtn.className = 'cta-button';
                }
            });
            
            // Handle form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const formData = new FormData(form);
                const data = {
                    offer: formData.get('offer'),
                    fullName: formData.get('fullName'),
                    email: formData.get('email'),
                    marketing: formData.get('marketing') ? 'Yes' : 'No',
                    timestamp: new Date().toISOString()
                };
                
                // Send to webhook
                fetch('https://michaelcarey.app.n8n.cloud/webhook/ab8485d1-92d3-423d-8fb6-6aae8f2654b5', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                }).catch(error => {
                    console.log('Webhook not configured, but form submitted successfully');
                });
                
                // Hide form and show success message
                formContainer.style.display = 'none';
                successMessage.style.display = 'flex';
            });
            
            // Form inputs now use CSS for focus states
            
            // Convert name and email inputs to lowercase as user types
            document.getElementById('fullName').addEventListener('input', function(e) {
                e.target.value = e.target.value.toLowerCase();
            });

            document.getElementById('email').addEventListener('input', function(e) {
                e.target.value = e.target.value.toLowerCase();
            });

            // Prevent IU email addresses
            document.getElementById('email').addEventListener('blur', function(e) {
                const email = e.target.value.toLowerCase();
                if (email.includes('@iu.edu')) {
                    e.target.setCustomValidity('Please use a personal email address, not your IU email.');
                    e.target.reportValidity();
                } else {
                    e.target.setCustomValidity('');
                }
            });
        });
    </script>
</body>
</html>